# ARアシスタント
## 前置き
Pullしても本アプリは体験できないため、ポートフォリオとしてスクリプトのみ掲載  
(Wit AI・クラウド・IoTエッジなど、必要になる要素が多いため）

## イメージ動画
[https://youtu.be/5MmYWvEG_x8](https://youtu.be/5MmYWvEG_x8)  

## 概要
Meta Questアプリ  
現実世界にアバターが出現し、プレイヤーの音声によって応答してくれる。  
音声認識と IoT を組み合わせており、現実物への操作が可能になっている。  
特定のハンドポーズをとることで、アバターが反応し、音声入力が開始される 。   
現在の機能は以下  
  + 天気予報 読み上げ  
  + Google カレンダー 読み上げ  
  + 部屋の照明 操作  
  + カーテン 操作  
  + お気遣い 機能

## 技術構成図
![ARアシスタント_モザイクアリ](https://github.com/ksk-14/ARassistant/assets/109534137/2e86b7cc-350d-40b7-b7e6-f1e497b98099)

## 技術構成 詳細
### AWS

| リソース | 使用用途 |
| :-------- | :--- |
| Cognito | セキュリティを高めるために使用 <br> 一時的な AWS のアクセス権を発行することで、Quest のソース内にアクセスキーを書く必要がなくなる|
| S3 | Quest と AWS のファイル受け渡し場所 <br> 音声指示の解析 JSON データ・AWS で生成された音声ファイルを保管している <br> ここに音声解析データが届くことで Lambda が動き出す|
| Lambda | 本アプリの最重要なコア部分のバックエンド処理を担当 <br> アバターの応答内容判断・Polly に音声を作るように指示・S3 への音声保存・EC2 へシグナルを送信・外部 API へアクセス・IoT Core にパブリッシュなど、主要な処理は全てここで行っている。<br> 本来は Private サブネットに DB を作り、そこにアクセスする予定だったので VPC 内に配置している|
| EC2 (VOICEVOX) | 音声生成するために使用(速度問題で今回は未使用) <br> VOICEVOX のエディタを除いた、エンジンとコアを使用 <br> 公式が配布しているイメージでコンテナ構築|
| EC2 (Nginx) | Web サーバー・リバースプロキシとして使用 <br> 外部からのシグナルを Flask アプリのポートへ転送している |
| EC2 (Flask) | シグナル管理のためのアプリ <br> クラウドで音声生成が完了したのか・Quest で音声再生は終了したのか等の、各プラットフォーム間の状態管理するためのアプリとして機能している <br> 各状態はメモリに保存しており、リクエストがあればその状態を返す仕様 |
| Route53 | AWS IoT Core のエンドポイントの名前解決をするために使用 |
| Amazon Polly | 音声生成するために使用 <br> Lambda からのテキスト内容に沿った音声を生成する|
| AWS IoT Core | ブローカーの役割 <br> プロトコルは MQTT で、ラズパイと Lambda 間で通信を行い仲介する|

### Unity側
### IoT側
